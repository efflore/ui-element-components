body.scroll-lock {
  position: fixed;
  overflow-y: hidden;
}

modal-dialog {

  > button {
    border: 0;
    padding: 0;
    background: none;
    cursor: pointer;
  }

  & dialog {
    display: none;
    flex-direction: column;
    border: 0;
    padding: 0;
    margin: auto 0;
    width: 100vw;
    max-width: 100%;
    max-height: 100dvh;
    color: var(--color-text);
    background: var(--color-background);
    opacity: var(--opacity-transparent);
    transition: opacity var(--transition-medium) var(--easing-inout);

    &::backdrop {
      backdrop-filter: blur(0);
      transition: backdrop-filter var(--transition-medium) var(--easing-inout);
      background: color-mix(in srgb, var(--color-gray-50) 50%, transparent);
    }
  }

  & dialog[open] {
    display: flex;
    opacity: var(--opacity-solid);

    > header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0;
      padding: 0 0 0 var(--space-l);

      > h2 {
        font-size: var(--font-size-l);
        font-weight: var(--font-weight-bold);
        margin: var(--space-xs) 0;
      }
    
      .close {
        border: 0;
        background: none;
        cursor: pointer;
        font-size: var(--font-size-l);
        margin: var(--space-m);
        padding: 0 var(--space-s);
        color: var(--color-primary);
        border-radius: var(--space-xxs);
        box-sizing: border-box;
    
        &:hover {
          color: var(--color-primary-hover);
        }
    
        &:active {
          color: var(--color-primary-active);
        }
      }
    }

    > form {
      padding: 0 var(--space-l) var(--space-m);
      overflow-y: auto;
      --bgRGB: 240 240 240;
      --bg: rgb(var(--bgRGB) / 100%);
      --bgTrans: rgb(var(--bgRGB) / 0%);
      --shadow: rgb(0 0 0 / 50%);
    
      background:
        /* Shadow Cover TOP */
        linear-gradient(var(--bg) 30%, var(--bgTrans)) center top,
        
        /* Shadow Cover BOTTOM */
        linear-gradient(var(--bgTrans), var(--bg) 70%) center bottom,
        
        /* Shadow TOP */
        radial-gradient(farthest-side at 50% 0, var(--shadow), rgb(0 0 0 / 0%)) center top,
        
        /* Shadow BOTTOM */
        radial-gradient(farthest-side at 50% 100%, var(--shadow), rgba(0 0 0 / 0%)) center bottom;
      
      background-repeat: no-repeat;
      background-size: 100% 3rem, 100% 3rem, 100% 1rem, 100% 1rem;
      background-attachment: local, local, scroll, scroll;

      .content {
        container-type: inline-size;
      }
    }

    &::backdrop {
      backdrop-filter: blur(1rem);
    }
  }
}

@media (min-width: 48em) {

  modal-dialog dialog[open] {
    width: 80vw;
    min-width: 48em;
    max-height: calc(100dvh - 2rem);
    border-radius: var(--space-s);
    box-shadow: 0 0 var(--space-s) rgb(0 0 0 / 50%);
    margin: auto auto;
  }
}